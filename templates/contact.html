{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/contact-responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/contact.css' %}">
{% endblock %}
{% block content %}
<section class="contact-section py-5" role="region" aria-label="Contact Form Section">
    <div class="container">
        <h1 class="mb-4" id="contact-heading">Contact Us</h1>
        <div class="row" role="presentation">
            <div class="col-md-6">
                <p>We would love to hear from you! Please fill out the form below and our team will respond as soon as possible.</p>
                {% if success %}
                    <div class="alert alert-success" role="alert" aria-live="polite" aria-atomic="true">
                        Thank you for contacting us! We will get back to you soon.
                    </div>
                {% endif %}
                <form method="post" action="" class="contact-form" role="form" aria-labelledby="contact-heading">
                    {% csrf_token %}
                    <fieldset>
                        <legend>Contact Information</legend>
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" name="name" required aria-required="true" aria-describedby="name-help name-error">
                        <label for="email" class="form-label">Email</label>
                        <div class="email-wrapper">
                            <input type="email" autocomplete="new-password" class="form-control" id="email" name="email" required aria-required="true" aria-describedby="email-help email-error">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="subject" class="form-label">Subject</label>
                        <input type="text" class="form-control" id="subject" name="subject" aria-describedby="subject-help subject-error">
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label">Message</label>
                        <textarea class="form-control" id="message" name="message" rows="4" required aria-describedby="message-help message-error"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" aria-label="Submit contact form">Send Message</button>
                </form>
{% block extra_js %}
<script src="{% static 'js/contact.js' %}"></script>
{% endblock %}

<!--
  function hideTempMailIcons() {
    // Target the email wrapper and input
    const wrapper = document.querySelector('.email-wrapper');
    if (!wrapper) return;

    // Remove suspicious children inside the wrapper
    wrapper.querySelectorAll(
      'img, button, div, span, [data-temp-mail-org], .temp-mail-btn, [class*="temp"], [id*="temp"], [src*="temp-mail"], [src*="tempmail"], [alt*="temp"], [title*="temp"]'
    ).forEach(el => {
      if (!el.matches('input[type="email"]')) el.remove();
    });

    // Remove suspicious siblings after the input
    const emailInput = wrapper.querySelector('input[type="email"]');
    if (emailInput) {
      let sibling = emailInput.nextSibling;
      while (sibling) {
        if (sibling.nodeType === 1 && (
          sibling.matches('img, button, div, span, [data-temp-mail-org], .temp-mail-btn, [class*="temp"], [id*="temp"], [src*="temp-mail"], [src*="tempmail"], [alt*="temp"], [title*="temp"]')
        )) {
          let toRemove = sibling;
          sibling = sibling.nextSibling;
          toRemove.remove();
        } else {
          sibling = sibling.nextSibling;
        }
      }
    }
  }

  // Run on load and every 500ms for a few seconds (to catch late-injected elements)
  let tries = 0;
  const interval = setInterval(() => {
    hideTempMailIcons();
    tries++;
    if (tries > 20) clearInterval(interval); // Stop after 10 seconds
  }, 500);
});
</script>

            </div>
            <div class="col-md-6" role="complementary">
                <div class="contact-info card p-4 rounded mb-4" role="region" aria-label="Contact Information">
                    <div class="contact-office-bg">
                        <div class="contact-office-overlay"></div>
                    </div>
                    <h2>Our Office</h2>
                    <p>Kathmandu, Nepal<br>Email: info@eldercarehub.com<br>Phone: +1 (555) 123-4567</p>
                    <h3>Office Hours</h3>
                    <p>Monday–Friday: 9:00 AM – 5:00 PM<br>Saturday–Sunday: Closed</p>
                    <h3>Follow Us</h3>
                    <div class="social-links" role="group" aria-label="Social media links">
                        <a href="http://www.facebook.com" class="me-2" aria-label="Follow us on Facebook">
                            <i class="bi bi-facebook" aria-hidden="true"></i> Facebook
                        </a>
                        <a href="https://www.twitter.com" class="me-2" aria-label="Follow us on Twitter">
                            <i class="bi bi-twitter" aria-hidden="true"></i> Twitter
                        </a>
                        <a href="https://www.instagram.com" aria-label="Follow us on Instagram">
                            <i class="bi bi-instagram" aria-hidden="true"></i> Instagram
                        </a>
                    </div>
                </div>
                <div class="mb-4">
                    <h3>Find Us</h3>
                    <iframe src="https://maps.google.com/maps?q=Ranipauwa,Pokhara,Nepal&amp;z=14&amp;output=embed" width="100%" height="200" frameborder="0" class="contact-map-frame" allowfullscreen></iframe>
                </div>
                <div class="faq">
                    <h3>Frequently Asked Questions</h3>
                    <ul>
                        <li><strong>How soon will I get a reply?</strong> We usually respond within 1–2 business days.</li>
                        <li><strong>Can I visit your office?</strong> Yes, please call ahead to schedule a visit.</li>
                        <li><strong>Do you provide emergency services?</strong> We do not provide emergency medical services. For emergencies, contact local authorities.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
